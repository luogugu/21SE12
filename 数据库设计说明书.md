# version 1.0

## 引言

### 编写目的

 本数据说明书应用于志愿信鸽的数据库设计规范，面向后端开发同学和产品经理

### 背景

- 关系型数据库

 数据库引擎：Innodb

 数据库可视化：navicat

 数据库系统：MySQL

 数据库名称：volunteer_pigeon_my

- 非关系型数据库

 数据库系统：Redis

 数据库名称：volunteer_pigeon_re

## 外部设计

### 标识符和状态

volunteer_pigeon_my中存在特定字段使用tinyint标识取值，具体如下：

- 项目等级 rank
  院级1、校级2、社级3

- 选择模式  model
  单选1、多选2

- 项目类型 type
  党小服1、党员服务2

- 项目状态 project_status
  全部1，进行中2，已完成3

- 项目进程   progress
  创建项目0、开始报名1、项目进行2、项目结束3

- 项目参与者状态 status
  报名者1，未完成2，已完成3

- 项目用户类型 political
  积极分子1，发展对象2，正式党员3

- 个人项目状态  binding
  未完成1，已完成2

- 性别  gender
  男1，女0，保密2

- 是否删除 is—_delete 
  1是，0否

### 约定

- 字段命名

 英文命名，以_连接，比如普通用户id在其他表中为client_id

## 结构设计

### 概念结构设计

// 说明本数据库将反映的现实世界中的实体、属性和它们之间的关系等的原始数据形式，包括各数据项、记录、系、文卷的标识符、定义、类型、度量单位和值域，建立本数据库的每一幅用户视图。

### 逻辑结构设计

// 说明把上述原始数据进行分解、合并后重新组织起来的数据库全局逻辑结构，包括所确定的关键字和属性、重新确定的记录结构和文卷结构、所建立的各个文卷之间的相互关系，形成本数据库的数据库管理员视图。

### 物理结构设计

 - 数据库存取设计

 	索引所依赖数据结构：B+树

 - 数据库文件组织

 	基本原则：将易变部分和稳定部分、存取频率较高部分和存取频率较低部分分开存放，以提高系统性能
 	实现：将表和索引分别放在不同的磁盘上，在查询的时，由两个磁盘驱动器分别在工作，保证读写速度，Innodb独立表空间存储

 - DBMS配置项

 	expire_logs_days = 365       //日志过期时间
 	interactive_timeout = 1800      //超时配置        
 	wait_timeout = 1800       
 	innodb_buffer_pool_chunk_size = 128M  //缓冲池大小
 	max_connections = 1024    //连接最大并发数

## 运用设计

### 数据字典设计

### 安全保密设计

volunteer_pigeon_my中对不同的用户进行权限区分：

 - 普通用户 User

 	description: 仅支持报名，查看时长，投票，不具备管理其他用户和管理项目的权限

 - 管理员 Admin

 	description: 具备管理普通用户和管理操作的权限

 - 超级管理员 SuperAdmin

 	description: 对管理员和普通用户进行管理

同时，在volunteer_pigeon_my中的诸如password字段进行加密存储

volunteer_pigeon_re中：
	

 - 对数据库密码采用PBKDF2加密后保存到 redis.conf
 - 设置布隆过滤器，防止大量请求打穿硬盘数据库